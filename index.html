<html>
  <head>
    <title>CSV Reader</title>
  </head>
  <body>
   <center><b><h1> <div id="csv-data"></div>
    <script>

// Check if a counter value is stored in session storage
if (sessionStorage.getItem('counter')) {
  counter = parseInt(sessionStorage.getItem('counter'));
}

const dataContainer = document.getElementById("csv-data");
let counter = 0;

fetch("https://raw.githubusercontent.com/taverncreative/frontapp/data.csv")
  .then(response => response.text())
  .then(data => {
    // Split the CSV data into rows
    const rows = data.split("\n");

    // Sort the rows by the 'Views Per Day' column
    rows.sort((row1, row2) => {
      const cells1 = row1.split(",");
      const cells2 = row2.split(",");
      return cells1[1] - cells2[1];
    });

    // Display the rows in the data container
    for (let i = 0; i < rows.length; i++) {
      const row = rows[i];
      const cells = row.split(",");
      const rowElement = document.createElement("div");
      const headingElement = document.createElement("h2");
      const paragraphElement = document.createElement("p");
      headingElement.innerHTML = cells[0];
      paragraphElement.innerHTML = cells[1];
      rowElement.appendChild(headingElement);
      rowElement.appendChild(paragraphElement);
      rowElement.addEventListener("click", () => {
        counter++;
        const nextCells = rows[counter].split(",");
        headingElement.innerHTML = nextCells[0];
        paragraphElement.innerHTML = nextCells[1];
      });
      dataContainer.appendChild(rowElement);
    }
  });

    </script>
  </body>
</html>
